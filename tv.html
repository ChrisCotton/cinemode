<!DOCTYPE html>
<html>

  <head>
    <title>TV</title>
    <link href="video-js.css" rel="stylesheet" type="text/css">
    <script src="video.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      _V_.options.flash.swf = "video-js.swf";
    </script>
  </head>

  <body>
    <div>
      <video id="example_video_1" class="video-js vjs-default-skin" controls preload="none" width="640" height="264"
          poster="http://video-js.zencoder.com/oceans-clip.png"
          data-setup="{}">
        <source src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm' />
        <track kind="captions" src="demo.captions.vtt" srclang="en" label="English" />
      </video>
    </div>
    
    <label>server address:</label>
    <input id="host_addr" type="text" value="http://localhost" />
    <br/>
    
    <!-- test js function -->
    <button onclick="video_play()">play</button>
    <button onclick="video_pause()">pause</button>

    <script type="text/javascript">
      myPlayer = videojs("example_video_1");

      // myFunc = function() {
      //   if (myPlayer.currentTime() >= 3) {
      //     myPlayer.pause();
      //     //send an alert to the demo2.html page 
      //     //alert("fired event in another page!");
      //   }
      // };
        
      // myPlayer.on('timeupdate', myFunc);

      function video_play(){
        myPlayer.play();
      }

      function video_pause(){
        myPlayer.pause();
      }

    </script>
    <script>
      var host_addr = document.getElementById('host_addr').value;

      var socket = io.connect(host_addr);
      socket.on('play', function(data){
        video_play();
      });
      socket.on('pause', function(data){
        video_pause();
      });
      socket.on('stop', function(data){
        myPlayer.stop();
      });
    </script>
  </body>

</html>
